(this["webpackJsonppr-tech-test-react"]=this["webpackJsonppr-tech-test-react"]||[]).push([[0],{43:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(30),s=n.n(c),i=n(79),o=(n(43),n(78)),j=n(71),u=n(81),b=n(13),l=n(28),O=n.n(l),d=n(31),m=n(77),h=n(17),x=n(32),f=n(19),p=function(e){var t=Object.entries(null===e||void 0===e?void 0:e.agenda);return e.areas.map((function(e){return Object(h.a)({},e.title,function(e,t){var n=t.find((function(t){return e===+t[0]}));return n?n[1].map((function(e){return Object(f.a)(Object(f.a)({},e),{},{startTime:new Date(e.startTime),endTime:new Date(e.endTime)})})).sort((function(e,t){return e.startTime>t.startTime?1:e.startTime<t.startTime?-1:0})).reduce((function(e,t){var n=t.startTime.toLocaleString("ru",{timeZone:"UTC",year:"numeric",month:"numeric",day:"numeric"});return Object(f.a)(Object(f.a)({},e),{},Object(h.a)({},n,e[n]?[].concat(Object(x.a)(e[n]),[t]):[t]))}),{}):{}}(e.id,t))}))},v=n(72),g=n(73),T=n(70),w=n(74),k=n(76),S=n(69),y=n(75),D=n(2),E={hour:"numeric",minute:"numeric"},L=function(e){var t=e.slotData;console.log(t.startTime);var n=t.startTime.toLocaleString("ru",E),r=t.endTime.toLocaleString("ru",E),a=t.speakers.length>0&&t.speakers.map((function(e){return e.name})).join(", ")||"";return Object(D.jsx)(S.a,{children:Object(D.jsxs)(T.a,{children:[Object(D.jsx)(j.a,{variant:"subtitle2",component:"span",children:n})," ","\u2014",Object(D.jsx)(j.a,{variant:"subtitle2",component:"span",children:r}),"  ",t.name," ",a&&Object(D.jsxs)(D.Fragment,{children:["(",a,")"]})]})},t.id)},B=function(e){var t=e.roomData,n=Object.entries(t);return Object(D.jsx)(v.a,{children:Object(D.jsx)(g.a,{children:n.map((function(e){return Object(D.jsxs)(a.a.Fragment,{children:[Object(D.jsx)(S.a,{children:Object(D.jsx)(T.a,{children:Object(D.jsx)(j.a,{variant:"h6",children:e[0]})})}),e[1].map((function(e){return Object(D.jsx)(L,{slotData:e},e.id)}))]},e[0])}))})})},C=function(e){var t=e.rooms.map((function(e){var t=Object.entries(e)[0][0];return{room:t,agendas:e[t]}}));return Object(D.jsx)(w.a,{component:y.a,children:Object(D.jsxs)(v.a,{children:[Object(D.jsx)(k.a,{children:Object(D.jsx)(S.a,{children:t.map((function(e){return Object(D.jsx)(T.a,{children:e.room},e.room)}))})}),Object(D.jsx)(g.a,{children:Object(D.jsx)(S.a,{children:t.map((function(e,t){return Object(D.jsx)(T.a,{align:"justify",style:{verticalAlign:"top"},children:Object(D.jsx)(B,{roomData:e.agendas})},e.room)}))})})]})})},F=function(){var e=Object(r.useState)(void 0),t=Object(b.a)(e,2),n=t[0],a=t[1],c=function(e,t){var n=Object(r.useState)(void 0),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!0),o=Object(b.a)(i,2),j=o[0],u=o[1],l=Object(r.useState)(""),m=Object(b.a)(l,2),h=m[0],x=m[1],f=Object(r.useCallback)(Object(d.a)(O.a.mark((function n(){var r,a,c,i,o,j;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([fetch(e),fetch(t)]);case 3:if(r=n.sent,a=Object(b.a)(r,2),c=a[0],i=a[1],200===c.status&&200===i.status){n.next=9;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438!");case 9:return n.next=11,c.json();case 11:return o=n.sent,n.next=14,i.json();case 14:j=n.sent,s({areas:c.url===e?o:j,agenda:i.url===t?j:o}),u(!1),x(""),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(0),u(!1),x(n.t0.message);case 24:case"end":return n.stop()}}),n,null,[[0,20]])}))),[e,t]);return Object(r.useEffect)((function(){f()}),[f]),{data:c,error:h,loading:j}}("https://dev.powerplace.online/api/v1/test/areas","https://dev.powerplace.online/api/v1/test/agenda"),s=c.data,i=c.error,o=c.loading;return Object(r.useEffect)((function(){if(s){var e=p(s);a(e)}}),[s]),i?Object(D.jsx)(j.a,{variant:"h5",color:"secondary",children:i}):o?Object(D.jsx)(m.a,{}):Object(D.jsx)(C,{rooms:n})},J=function(){return Object(D.jsx)(o.a,{children:Object(D.jsxs)(u.a,{mt:2,children:[Object(D.jsx)(j.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(D.jsx)(F,{})]})})};var A=function(){return Object(D.jsx)(J,{})};s.a.render(Object(D.jsxs)(a.a.StrictMode,{children:[Object(D.jsx)(i.a,{}),Object(D.jsx)(A,{})]}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.571060bd.chunk.js.map